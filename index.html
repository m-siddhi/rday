<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Special Surprise</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@400;600&family=Gochi+Hand&display=swap");

      body {
        font-family: "Quicksand", sans-serif;
        background-color: #fff0f3;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      /* Animated Background Particles */
      .bg-sparkle {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
      }

      /* Envelope Styles */
      .envelope-wrapper {
        position: relative;
        cursor: pointer;
        z-index: 10;
      }

      .envelope {
        position: relative;
        width: 280px;
        height: 180px;
        background-color: #ff85a2;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
        box-shadow: 0 10px 25px rgba(255, 133, 162, 0.3);
      }

      .envelope::before {
        content: "";
        position: absolute;
        top: 0;
        z-index: 2;
        border-top: 100px solid transparent;
        border-left: 140px solid #ffa3b1;
        border-right: 140px solid #ffa3b1;
        border-bottom: 80px solid #ffa3b1;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
      }

      .flap {
        position: absolute;
        top: 0;
        width: 0;
        height: 0;
        border-left: 140px solid transparent;
        border-right: 140px solid transparent;
        border-top: 100px solid #ff4d6d;
        transform-origin: top;
        transition: transform 0.6s ease;
        z-index: 3;
      }

      .opened .flap {
        transform: rotateX(180deg);
        z-index: 1;
      }

      .letter {
        position: absolute;
        bottom: 10px;
        left: 20px;
        width: 240px;
        height: 140px;
        background: white;
        transition: transform 0.8s ease;
        z-index: 2;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .opened .letter {
        transform: translateY(-120px);
      }

      .heart-seal {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 40px;
        z-index: 4;
        transition: opacity 0.3s;
      }
      .opened .heart-seal {
        opacity: 0;
      }

      /* Growth Animation Stages */
      .rose-stage {
        transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
      }
      .stage-0 {
        transform: scale(0.5);
        filter: sepia(1);
      } /* Seed */
      .stage-1 {
        transform: scale(0.7);
      } /* Sprout */
      .stage-2 {
        transform: scale(0.9);
      } /* Leaves */
      .stage-3 {
        transform: scale(1.1);
      } /* Small Bud */
      .stage-4 {
        transform: scale(1.3);
      } /* Partial Bloom */
      .stage-5 {
        transform: scale(1.5);
        filter: drop-shadow(0 0 15px #ff4d6d);
      } /* Full Bloom */

      /* Sticky Note Style */
      .sticky-note {
        background: #fff9c4;
        padding: 20px;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
        transform: rotate(-2deg);
        font-family: "Gochi Hand", cursive;
        border-left: 2px solid #fbc02d;
      }

      .hidden-section {
        display: none !important;
      }

      .water-drop {
        position: absolute;
        animation: fall 0.8s linear forwards;
        pointer-events: none;
      }

      @keyframes fall {
        0% {
          transform: translateY(0);
          opacity: 1;
        }
        100% {
          transform: translateY(200px);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-sparkle" id="sparkleLayer"></div>

    <!-- Step 1: Blank Envelope -->
    <div id="envelopeSection" class="envelope-wrapper" onclick="openEnvelope()">
      <div class="flap"></div>
      <div class="envelope">
        <div class="letter">
          <!-- Text hidden initially -->
        </div>
      </div>
      <div class="heart-seal">‚úâÔ∏è</div>
    </div>

    <!-- Step 2: Gardening Game -->
    <div
      id="gameSection"
      class="hidden-section flex-col items-center text-center z-10"
    >
      <h2 id="gameHeader" class="text-2xl font-bold text-pink-600 mb-8">
        Click to help it grow...
      </h2>
      <div id="growthContainer" class="rose-stage stage-0 mb-10 relative">
        <svg width="120" height="150" viewBox="0 0 100 120" id="roseSvg">
          <!-- Ground -->
          <ellipse cx="50" cy="110" rx="30" ry="10" fill="#8d6e63" />
          <!-- Stem -->
          <path
            id="stem"
            d="M50 110 Q50 110 50 110"
            stroke="#2e7d32"
            stroke-width="4"
            fill="none"
          />
          <!-- Leaves (Hidden initially) -->
          <path id="leafL" d="" fill="#4caf50" />
          <path id="leafR" d="" fill="#4caf50" />
          <!-- Flower Head -->
          <g id="flowerHead">
            <circle id="seed" cx="50" cy="105" r="5" fill="#5d4037" />
            <path id="petals" d="" fill="#ff4d6d" />
          </g>
        </svg>
      </div>
      <button
        id="waterBtn"
        class="bg-sky-400 hover:bg-sky-500 text-white px-8 py-3 rounded-full font-bold shadow-lg transition-all"
        onclick="waterFlower(event)"
      >
        üíß Need Water Plz
      </button>
      <p id="waterCount" class="mt-4 text-sky-600 font-medium italic">
        Thirsty for love...
      </p>
    </div>

    <!-- Step 3: Meme & Sticky Note -->
    <div
      id="noteSection"
      class="hidden-section max-w-sm w-full flex-col items-center z-10"
    >
      <div class="bg-white p-2 rounded-lg shadow-2xl mb-6 transform -rotate-2">
        <img
          src="/images/rose.jpeg"
          class="w-full rounded border border-pink-100"
        />
        <p class="p-3 text-xs italic text-gray-600">
          "I wanted to get you a real rose, but I'm broke, so here's an
          AI-generated masterpiece instead."
        </p>
      </div>

      <div class="sticky-note text-xl text-gray-800 leading-snug">
        <h3 class="text-2xl font-bold mb-2 border-b border-yellow-300 pb-1">
          A Little Note For You My Love
        </h3>
        <p>
          You are the reason my phone battery dies faster‚Ä¶ because I keep
          smiling at your messages. You‚Äôre sweet, annoying, adorable, and
          somehow still perfect.
        </p>
      </div>

      <button
        class="mt-8 bg-pink-500 text-white px-10 py-3 rounded-full font-bold animate-pulse"
        onclick="startLoading()"
      >
        Keep Going? ‚ù§Ô∏è
      </button>
    </div>

    <!-- Step 4: Loading -->
    <div id="loadingSection" class="hidden-section w-72 text-center z-10">
      <p class="mb-4 text-pink-600 font-bold text-lg">
        Are you actually ready for this?
      </p>
      <div
        class="w-full h-4 bg-white rounded-full overflow-hidden shadow-inner p-1"
      >
        <div
          id="progressBar"
          class="h-full bg-pink-500 rounded-full transition-all duration-100"
        ></div>
      </div>
    </div>

    <!-- Step 5: Final Question -->
    <div id="finalSection" class="hidden-section text-center z-10">
      <h2 class="text-3xl font-bold text-pink-600 mb-12 drop-shadow-sm">
        Will you be my rose forever?
      </h2>
      <div class="flex justify-center gap-8 items-center h-20">
        <button
          id="yesBtn"
          class="bg-pink-500 hover:bg-pink-600 text-white text-xl font-bold py-5 px-12 rounded-2xl shadow-xl transition-transform active:scale-90"
          onclick="celebrate()"
        >
          üåπ YES
        </button>
        <button
          id="noBtn"
          class="no-btn bg-amber-100 text-amber-600 border-2 border-amber-200 text-lg font-bold py-3 px-8 rounded-xl shadow-sm transition-all"
          onmouseover="dodge()"
        >
          üåª No
        </button>
      </div>
    </div>

    <!-- Step 6: Success -->
    <div id="successSection" class="hidden-section text-center z-10">
      <div class="text-7xl mb-6">üåπ‚ú®</div>
      <h2 class="text-4xl font-bold text-pink-600 mb-4">
        You're officially stuck with me suyi puyi!
      </h2>
      <p class="text-xl text-gray-600">Locked in forever. No refunds. ‚ù§Ô∏è</p>
    </div>

    <script>
      let clicks = 0;

      function openEnvelope() {
        document.getElementById("envelopeSection").classList.add("opened");
        setTimeout(() => {
          document
            .getElementById("envelopeSection")
            .classList.add("hidden-section");
          document
            .getElementById("gameSection")
            .classList.remove("hidden-section");
          document.getElementById("gameSection").classList.add("flex");
        }, 1000);
      }

      function waterFlower(e) {
        clicks++;
        createWaterDrop(e.clientX, e.clientY);

        const stage = document.getElementById("growthContainer");
        const stem = document.getElementById("stem");
        const seed = document.getElementById("seed");
        const petals = document.getElementById("petals");
        const leafL = document.getElementById("leafL");
        const leafR = document.getElementById("leafR");

        stage.className = `rose-stage mb-10 stage-${clicks}`;

        // Visual Growth Logic
        if (clicks === 1) {
          stem.setAttribute("d", "M50 110 Q50 100 50 80");
          seed.style.opacity = "0";
        } else if (clicks === 2) {
          stem.setAttribute("d", "M50 110 Q45 80 50 60");
          leafL.setAttribute("d", "M50 90 Q30 85 40 75 Q50 85 50 90");
        } else if (clicks === 3) {
          leafR.setAttribute("d", "M50 80 Q70 75 60 65 Q50 75 50 80");
          petals.setAttribute("d", "M50 60 Q45 50 50 45 Q55 50 50 60");
        } else if (clicks === 4) {
          petals.setAttribute(
            "d",
            "M50 60 Q35 40 50 30 Q65 40 50 60 M50 60 Q40 50 50 40 Q60 50 50 60",
          );
        } else if (clicks === 5) {
          petals.setAttribute(
            "d",
            "M50 60 C20 30 80 30 50 60 M50 60 C30 10 70 10 50 60 M50 60 C10 40 90 40 50 60",
          );
          document.getElementById("waterBtn").style.display = "none";
          document.getElementById("waterCount").innerText = "Bloomed!";
          document.getElementById("gameHeader").innerText =
            "You bloomed my heart like a rose who watered now.";

          setTimeout(() => {
            document
              .getElementById("gameSection")
              .classList.replace("flex", "hidden-section");
            document
              .getElementById("noteSection")
              .classList.remove("hidden-section");
            document.getElementById("noteSection").classList.add("flex");
          }, 2500);
        }

        if (clicks < 5) {
          document.getElementById("waterCount").innerText = `Need More`;
        }
      }

      function createWaterDrop(x, y) {
        const drop = document.createElement("div");
        drop.innerHTML = "üíß";
        drop.className = "water-drop";
        drop.style.left = x + "px";
        drop.style.top = y + "px";
        document.body.appendChild(drop);
        setTimeout(() => drop.remove(), 800);
      }

      function startLoading() {
        document
          .getElementById("noteSection")
          .classList.replace("flex", "hidden-section");
        document
          .getElementById("loadingSection")
          .classList.remove("hidden-section");

        let w = 0;
        const bar = document.getElementById("progressBar");
        const itv = setInterval(() => {
          w += 1;
          bar.style.width = w + "%";
          if (w >= 100) {
            clearInterval(itv);
            setTimeout(() => {
              document
                .getElementById("loadingSection")
                .classList.add("hidden-section");
              document
                .getElementById("finalSection")
                .classList.remove("hidden-section");
            }, 500);
          }
        }, 40);
      }

      function dodge() {
        const btn = document.getElementById("noBtn");
        const x = Math.random() * (window.innerWidth - 120);
        const y = Math.random() * (window.innerHeight - 60);
        btn.style.position = "fixed";
        btn.style.left = x + "px";
        btn.style.top = y + "px";
        btn.style.zIndex = "1000";
      }

      function celebrate() {
        document.getElementById("finalSection").classList.add("hidden-section");
        document
          .getElementById("successSection")
          .classList.remove("hidden-section");

        setInterval(() => {
          const heart = document.createElement("div");
          heart.innerHTML = ["üåπ", "‚ù§Ô∏è", "üíñ", "‚ú®"][
            Math.floor(Math.random() * 4)
          ];
          heart.style.position = "fixed";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.top = "110vh";
          heart.style.fontSize = Math.random() * 20 + 20 + "px";
          heart.style.transition = `all ${Math.random() * 2 + 2}s linear`;
          document.body.appendChild(heart);

          setTimeout(() => {
            heart.style.transform = `translateY(-120vh) rotate(${Math.random() * 360}deg)`;
            heart.style.opacity = "0";
          }, 100);
          setTimeout(() => heart.remove(), 4000);
        }, 100);
      }

      // Background Sparkles
      setInterval(() => {
        const s = document.createElement("div");
        s.className = "absolute bg-white rounded-full opacity-0 animate-ping";
        const size = Math.random() * 4 + 2;
        s.style.width = size + "px";
        s.style.height = size + "px";
        s.style.left = Math.random() * 100 + "%";
        s.style.top = Math.random() * 100 + "%";
        document.getElementById("sparkleLayer").appendChild(s);
        setTimeout(() => s.remove(), 2000);
      }, 300);
    </script>
  </body>
</html>
